<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ASR Pro</title>
<script src="https://unpkg.com/lucide@latest"></script>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100vh;
  font-size: 13px;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.window {
  width: 1080px;
  height: 720px;
  background: #1e1e1e;
  border-radius: 12px;
  /* macOS-style beautiful shadow with multiple layers */
  box-shadow: 
    0 0 0 1px rgba(255, 255, 255, 0.05),
    0 2px 4px rgba(0, 0, 0, 0.15),
    0 8px 16px rgba(0, 0, 0, 0.25),
    0 16px 32px rgba(0, 0, 0, 0.3),
    0 32px 64px rgba(0, 0, 0, 0.35);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  /* Add subtle backdrop blur effect */
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
}

.window-container {
  display: flex;
  flex: 1;
  overflow: hidden;
}

.sidebar {
  width: 240px;
  background: #252525;
  display: flex;
  flex-direction: column;
}

.sidebar-header {
  height: 38px;
  display: flex;
  align-items: center;
  padding: 0 20px;
  background: #252525;
}

.window-controls {
  display: flex;
  gap: 8px;
}

.window-btn {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  border: none;
  cursor: pointer;
}

.window-btn.close {
  background: #ff5f57;
}

.window-btn.minimize {
  background: #ffbd2e;
}

.window-btn.maximize {
  background: #28ca42;
}

.logo {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 20px;
  border-bottom: 1px solid #333;
}

.logo svg {
  width: 20px;
  height: 20px;
  stroke: #fff;
  fill: none;
  stroke-width: 2;
}

.logo span {
  font-size: 15px;
  font-weight: 500;
  color: #fff;
}

.nav-list {
  flex: 1;
  padding: 10px;
}

.nav-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 12px;
  color: #999;
  cursor: pointer;
  border-radius: 6px;
  transition: all 0.2s ease;
  font-size: 13px;
  pointer-events: auto;
}

.nav-item:hover {
  color: #fff;
  background: rgba(255,255,255,0.05);
}

.nav-item.active {
  color: #0a84ff;
  background: rgba(10,132,255,0.1);
}

.nav-item svg {
  width: 16px;
  height: 16px;
  stroke-width: 2px;
  flex-shrink: 0;
}

.content-area {
  flex: 1;
  display: flex;
  flex-direction: column;
  background: #1e1e1e;
}

.content-header {
  height: 38px;
  background: #1e1e1e;
}

.main-content {
  flex: 1;
  padding: 20px 40px;
  overflow-y: auto;
  position: relative;
}

.content-section {
  display: none;
}

.content-section.active {
  display: block;
  animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

h1 {
  font-size: 24px;
  font-weight: 600;
  color: #fff;
  margin-bottom: 8px;
}

.subtitle {
  color: #999;
  font-size: 14px;
  margin-bottom: 30px;
}

.section-title {
  font-size: 14px;
  font-weight: 600;
  color: #fff;
  margin: 25px 0 15px 0;
  letter-spacing: 0.5px;
}

.setting-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 0;
  border-bottom: 1px solid #333;
}

.setting-row:last-child {
  border-bottom: none;
}

.setting-label {
  display: flex;
  align-items: center;
  gap: 10px;
  color: #fff;
  font-size: 13px;
}

.setting-label svg {
  width: 16px;
  height: 16px;
  color: #999;
  stroke-width: 2px;
}

.toggle {
  width: 42px;
  height: 24px;
  background: #333;
  border-radius: 12px;
  position: relative;
  cursor: pointer;
  transition: all 0.3s ease;
}

.toggle.active {
  background: #0a84ff;
}

.toggle-knob {
  width: 20px;
  height: 20px;
  background: #fff;
  border-radius: 50%;
  position: absolute;
  top: 2px;
  left: 2px;
  transition: all 0.3s ease;
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

.toggle.active .toggle-knob {
  left: 20px;
}

.dropdown {
  background: #333;
  color: #fff;
  border: 1px solid #444;
  border-radius: 6px;
  padding: 8px 12px;
  font-size: 13px;
  min-width: 150px;
  cursor: pointer;
}

.dropdown:hover {
  background: #3a3a3a;
}

.mic-list {
  background: #252525;
  border-radius: 8px;
  overflow: hidden;
}

.mic-item {
  display: flex;
  align-items: center;
  padding: 12px 16px;
  color: #fff;
  border-bottom: 1px solid #333;
  cursor: pointer;
  transition: all 0.2s ease;
}

.mic-item:last-child {
  border-bottom: none;
}

.mic-item:hover {
  background: rgba(255,255,255,0.03);
}

.mic-item.active {
  background: rgba(10,132,255,0.1);
  color: #0a84ff;
}

.mic-number {
  font-size: 12px;
  color: #666;
  margin-right: 12px;
  min-width: 20px;
}

.action-btn {
  background: #333;
  color: #fff;
  border: 1px solid #444;
  padding: 10px 16px;
  border-radius: 6px;
  font-size: 13px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  transition: all 0.2s ease;
  margin-right: 10px;
  margin-bottom: 10px;
}

.action-btn:hover {
  background: #3a3a3a;
  border-color: #555;
}

.action-btn svg {
  width: 16px;
  height: 16px;
  stroke-width: 2px;
}

.model-card {
  background: #252525;
  border: 1px solid #333;
  border-radius: 8px;
  padding: 20px;
  margin-bottom: 20px;
  transition: all 0.3s ease;
}

.model-card:hover {
  border-color: #0a84ff;
  box-shadow: 0 4px 12px rgba(10,132,255,0.1);
}

.model-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}

.model-name {
  font-size: 16px;
  font-weight: 600;
  color: #fff;
}

.model-status {
  background: #28ca42;
  color: #fff;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 11px;
  font-weight: 500;
}

.model-status.loading {
  background: #ffbd2e;
}

.model-status.error {
  background: #ff5f57;
}

.model-details {
  color: #999;
  font-size: 12px;
  margin-bottom: 15px;
}

.progress-bar {
  width: 100%;
  height: 4px;
  background: #333;
  border-radius: 2px;
  overflow: hidden;
  margin-bottom: 15px;
}

.progress-fill {
  height: 100%;
  background: #0a84ff;
  border-radius: 2px;
  transition: width 0.3s ease;
}

.key-binding {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 10px;
}

.key-binding input {
  background: #333;
  color: #fff;
  border: 1px solid #444;
  border-radius: 6px;
  padding: 8px 12px;
  font-size: 13px;
  flex: 1;
}

.key-binding input:focus {
  border-color: #0a84ff;
  outline: none;
}

.remove-btn {
  background: #ff5f57;
  color: #fff;
  border: none;
  padding: 8px 12px;
  border-radius: 6px;
  font-size: 12px;
  cursor: pointer;
}

.add-key-btn {
  background: #0a84ff;
  color: #fff;
  border: none;
  padding: 10px 16px;
  border-radius: 6px;
  font-size: 13px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 20px;
}

.add-key-btn:hover {
  background: #0968c4;
}

.add-key-btn svg {
  width: 16px;
  height: 16px;
  stroke-width: 2px;
}

.about-container {
  text-align: center;
  padding: 40px 20px;
}

.developer-info {
  margin-bottom: 40px;
}

.developer-avatar {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  background: linear-gradient(135deg, #0a84ff, #00d4aa);
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 20px;
  font-size: 24px;
  font-weight: bold;
  color: #fff;
}

.developer-name {
  font-size: 24px;
  font-weight: 600;
  color: #fff;
  margin-bottom: 8px;
}

.developer-title {
  color: #999;
  font-size: 14px;
  margin-bottom: 20px;
}

.developer-links {
  display: flex;
  justify-content: center;
  gap: 20px;
}

.developer-links a {
  color: #0a84ff;
  text-decoration: none;
  font-size: 13px;
  display: flex;
  align-items: center;
  gap: 6px;
}

.developer-links a:hover {
  color: #fff;
}

.developer-links svg {
  width: 16px;
  height: 16px;
  stroke-width: 2px;
}

.app-info {
  background: #252525;
  border-radius: 8px;
  padding: 20px;
  text-align: left;
}

.app-info h3 {
  color: #fff;
  font-size: 16px;
  margin-bottom: 10px;
}

.app-info p {
  color: #999;
  font-size: 13px;
  line-height: 1.5;
  margin-bottom: 10px;
}

.app-info p:last-child {
  margin-bottom: 0;
}

.status-indicator {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: #28ca42;
  margin-top: 10px;
}

.status-indicator svg {
  width: 14px;
  height: 14px;
  stroke-width: 2px;
}

.scrollbar-hidden {
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.scrollbar-hidden::-webkit-scrollbar {
  display: none;
}

.main-content::-webkit-scrollbar {
  width: 6px;
}

.main-content::-webkit-scrollbar-track {
  background: transparent;
}

.main-content::-webkit-scrollbar-thumb {
  background: #444;
  border-radius: 3px;
}

.main-content::-webkit-scrollbar-thumb:hover {
  background: #555;
}

/* Fix pointer events for scrollable content */
.setting-row, .model-card, .key-binding, .mic-item {
  pointer-events: none;
}

.setting-row *, .model-card *, .key-binding *, .mic-item * {
  pointer-events: auto;
}

.toggle, .dropdown, .action-btn, .add-key-btn, .remove-btn {
  pointer-events: auto;
}
</style>
</head>
<body>
  <div class="window">
    <div class="window-container">
      <div class="sidebar">
        <div class="sidebar-header">
          <div class="window-controls">
            <button class="window-btn close"></button>
            <button class="window-btn minimize"></button>
            <button class="window-btn maximize"></button>
          </div>
        </div>
        
        <div class="logo">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m12 8-9.04 9.06a2.82 2.82 0 1 0 3.98 3.98L16 12"/>
            <circle cx="17" cy="7" r="5"/>
          </svg>
          <span>ASR Pro</span>
        </div>
        
        <div class="nav-list">
          <div class="nav-item active" onclick="showSection('general')">
            <i data-lucide="settings" aria-label="Settings icon"></i>
            <span>General Settings</span>
          </div>
          <div class="nav-item" onclick="showSection('dictation')">
            <i data-lucide="cpu" aria-label="CPU icon"></i>
            <span>Dictation Engine</span>
          </div>
          <div class="nav-item" onclick="showSection('keyboard')">
            <i data-lucide="keyboard" aria-label="Keyboard icon"></i>
            <span>Keyboard Controls</span>
          </div>
          
          <!-- Spacer to push bottom items down -->
          <div style="flex: 1;"></div>
          
          <div class="nav-item" onclick="showSection('about')">
            <i data-lucide="info" aria-label="Info icon"></i>
            <span>About</span>
          </div>
          <div class="nav-item" onclick="exitApp()">
            <i data-lucide="x" aria-label="Exit icon"></i>
            <span>Exit</span>
          </div>
        </div>
      </div>

      <div class="content-area">
        <div class="content-header"></div>
        
        <div class="main-content">
          <div class="content-section active" id="general">
            <h1>General Preferences</h1>
            <p class="subtitle">Configure ASR Pro to match your workflow and preferences.</p>
            
            <div class="section-title">Behavior</div>
            <div class="setting-row">
              <div class="setting-label">
                <i data-lucide="power" aria-label="Power icon"></i>
                Launch at login
              </div>
              <div class="toggle active" aria-label="Toggle launch at login">
                <div class="toggle-knob"></div>
              </div>
            </div>
            <div class="setting-row">
              <div class="setting-label">
                <i data-lucide="square-stack" aria-label="Stack icon"></i>
                Show in Dock
              </div>
              <div class="toggle" aria-label="Toggle show in dock">
                <div class="toggle-knob"></div>
              </div>
            </div>
            <div class="setting-row">
              <div class="setting-label">
                <i data-lucide="panel-top" aria-label="Panel icon"></i>
                Show in Status Bar
              </div>
              <div class="toggle active" aria-label="Toggle show in status bar">
                <div class="toggle-knob"></div>
              </div>
            </div>
            <div class="setting-row">
              <div class="setting-label">
                <i data-lucide="globe" aria-label="Globe icon"></i>
                App Interface Language
              </div>
              <select class="dropdown" aria-label="Select language">
                <option>System Default</option>
                <option>English</option>
                <option>Spanish</option>
                <option>French</option>
              </select>
            </div>
            
            <div class="section-title">Microphone Priority Settings</div>
            <div class="mic-list">
              <div class="mic-item">
                <span class="mic-number">1.</span> Arctis Nova 7
              </div>
              <div class="mic-item active">
                <span class="mic-number">2.</span> MacBook Air Microphone
                <i data-lucide="check" style="margin-left: auto; width: 14px; height: 14px;" aria-label="Active microphone"></i>
              </div>
              <div class="mic-item">
                <span class="mic-number">3.</span> Suraj's AirPods
              </div>
              <div class="mic-item">
                <span class="mic-number">4.</span> Microsoft Teams Audio
              </div>
              <div class="mic-item">
                <span class="mic-number">5.</span> DEC0954 Microphone
              </div>
            </div>
            <p style="font-size: 11px; color: #666; margin-top: 10px;">Microphones are tried in priority order. Drag to reorder.</p>
          </div>
          
          <div class="content-section" id="dictation">
            <h1>AI Models</h1>
            <p class="subtitle">Manage AI models for speech recognition and transcription tasks.</p>
            
            <div class="section-title">Currently Available</div>
            
            <div class="model-card">
              <div class="model-header">
                <div class="model-name">Parakeet TDT 1.1B</div>
                <div class="model-status">Loaded</div>
              </div>
              <div class="model-details">NVIDIA • Timestamp Detection • 1.1B parameters</div>
              <div class="progress-bar">
                <div class="progress-fill" style="width: 100%;"></div>
              </div>
              <button class="action-btn">
                <i data-lucide="refresh-cw" aria-label="Refresh icon"></i> Change Model
              </button>
              <button class="action-btn">
                <i data-lucide="settings-2" aria-label="Settings icon"></i> Local Whisper Settings
              </button>
              <button class="action-btn">
                <i data-lucide="folder-open" aria-label="Folder icon"></i> Import ASR Pro Project
              </button>
            </div>
            
            <div class="model-card">
              <div class="model-header">
                <div class="model-name">Whisper Large v3</div>
                <div class="model-status loading">Downloading</div>
              </div>
              <div class="model-details">OpenAI • Large Model • 1.5B parameters</div>
              <div class="progress-bar">
                <div class="progress-fill" style="width: 65%;"></div>
              </div>
            </div>
            
            <div class="section-title">Recommended Models</div>
            <div class="model-card">
              <div class="model-header">
                <div class="model-name">Distil-Whisper</div>
                <div class="model-status">Download</div>
              </div>
              <div class="model-details">Hugging Face • Optimized for speed • 756M parameters</div>
              <button class="action-btn">
                <i data-lucide="download" aria-label="Download icon"></i> Download Model
              </button>
            </div>
            
            <div class="section-title">Model Status</div>
            <div class="status-indicator">
              <i data-lucide="circle-check" aria-label="Check icon"></i>
              All models are functioning correctly
            </div>
          </div>
          
          <div class="content-section" id="keyboard">
            <h1>Keyboard Controls</h1>
            <p class="subtitle">Choose your preferred keyboard keys for starting ASR Pro. Press only these keys to begin recording.</p>
            
            <div class="section-title">Recording Controls</div>
            
            <div style="margin-bottom: 20px;">
              <label style="font-size: 12px; color: #8b8b8b; display: block; margin-bottom: 10px;">Activation Mode</label>
              <select class="dropdown" aria-label="Select activation mode">
                <option>Hold or Toggle (Auto-detect)</option>
                <option>Toggle (Tap to start/stop)</option>
                <option>Hold (Record while pressed)</option>
                <option>Double Tap</option>
              </select>
            </div>
            
            <div class="section-title">Activation Keys</div>
            
            <div id="keybindings">
              <div class="key-binding">
                <span style="color: #8b8b8b; font-size: 12px;">Key 1:</span>
                <input type="text" value="Alt + `" readonly aria-label="Key binding 1">
                <button class="remove-btn" onclick="removeKey(this)" style="display: none;">Remove</button>
              </div>
            </div>
            
            <button class="add-key-btn" onclick="addKey()">
              <i data-lucide="plus" aria-label="Plus icon"></i> Add Activation Key
            </button>
            
            <div class="section-title">Test Your Keys</div>
            
            <p style="color: #0a84ff; font-size: 13px; margin-bottom: 10px; display: flex; align-items: center; gap: 6px;">
              <i data-lucide="hand" style="width: 14px; height: 14px;" aria-label="Hand icon"></i> Press your configured keys to test
            </p>
            
            <div style="background: #252525; border: 1px solid #3a3a3a; padding: 40px; border-radius: 6px; text-align: center;">
              <span style="font-size: 14px; color: #666;">Waiting for key press...</span>
            </div>
          </div>
          
          <div class="content-section" id="about">
            <div class="about-container">
              <div class="developer-info">
                <div class="developer-avatar">SM</div>
                <h2 class="developer-name">Suraj Mandal</h2>
                <p class="developer-title">Software Developer</p>
                <div class="developer-links">
                  <a href="https://github.com/surajmandalcell" target="_blank">
                    <i data-lucide="github" aria-label="GitHub icon"></i> GitHub
                  </a>
                  <a href="https://mandalsuraj.com" target="_blank">
                    <i data-lucide="globe" aria-label="Website icon"></i> Website
                  </a>
                </div>
              </div>
              
              <div class="app-info">
                <h3>ASR Pro v1.0</h3>
                <p>AI-powered speech recognition and transcription application built for productivity and accessibility.</p>
                <p><strong>Technologies:</strong> PySide6, FastAPI, PyTorch, Whisper AI</p>
                <p><strong>License:</strong> MIT License</p>
                <div class="status-indicator">
                  <i data-lucide="circle-check" aria-label="Status icon"></i>
                  Application running smoothly
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ===== JavaScript-Python Bridge =====
    // These functions communicate with the Python backend via console signals
    
    /**
     * Bridge object for Python-JavaScript communication
     * All functions send console signals that are intercepted by the Python backend
     */
    const Bridge = {
      // Window control functions
      hideWindow() {
        console.log('HIDE_WINDOW_SIGNAL');
      },
      
      minimizeWindow() {
        console.log('MINIMIZE_WINDOW_SIGNAL');
      },
      
      exitApp() {
        console.log('EXIT_APP_SIGNAL');
      },
      
      // Application control functions
      startRecording() {
        console.log('START_RECORDING_SIGNAL');
      },
      
      stopRecording() {
        console.log('STOP_RECORDING_SIGNAL');
      },
      
      // Settings functions
      saveSettings(settings) {
        console.log('SAVE_SETTINGS_SIGNAL', JSON.stringify(settings));
      },
      
      loadSettings() {
        console.log('LOAD_SETTINGS_SIGNAL');
      },
      
      // File operations
      openMediaFile() {
        console.log('OPEN_MEDIA_FILE_SIGNAL');
      }
    };
    
    // ===== UI Management =====
    
    /**
     * Show a specific content section and update navigation
     */
    function showSection(sectionId) {
      // Hide all sections
      document.querySelectorAll('.content-section').forEach(section => {
        section.classList.remove('active');
      });
      
      // Show selected section
      document.getElementById(sectionId).classList.add('active');
      
      // Update nav active state
      document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
      });
      event.target.closest('.nav-item').classList.add('active');
    }
    
    // Legacy function for backward compatibility
    function exitApp() {
      Bridge.exitApp();
    }
    
    function addKey() {
      const keybindings = document.getElementById('keybindings');
      const keyCount = keybindings.children.length + 1;
      
      const keyBinding = document.createElement('div');
      keyBinding.className = 'key-binding';
      keyBinding.innerHTML = `
        <span style="color: #8b8b8b; font-size: 12px;">Key ${keyCount}:</span>
        <input type="text" value="Click to set..." readonly aria-label="Key binding ${keyCount}">
        <button class="remove-btn" onclick="removeKey(this)">Remove</button>
      `;
      
      keybindings.appendChild(keyBinding);
    }
    
    function removeKey(button) {
      button.parentElement.remove();
      
      // Update key numbers
      document.querySelectorAll('#keybindings .key-binding').forEach((binding, index) => {
        binding.querySelector('span').textContent = `Key ${index + 1}:`;
      });
    }
    
    // Toggle functionality
    document.querySelectorAll('.toggle').forEach(toggle => {
      toggle.addEventListener('click', () => {
        toggle.classList.toggle('active');
      });
    });
    
    // ===== Application Initialization =====
    
    /**
     * Initialize window controls with bridge integration
     */
    function initializeWindowControls() {
      const closeBtn = document.querySelector('.window-btn.close');
      const minimizeBtn = document.querySelector('.window-btn.minimize');
      
      if (closeBtn) {
        closeBtn.addEventListener('click', (e) => {
          e.preventDefault();
          console.log('Close button clicked - hiding to tray');
          Bridge.hideWindow();
        });
      }
      
      if (minimizeBtn) {
        minimizeBtn.addEventListener('click', (e) => {
          e.preventDefault();
          console.log('Minimize button clicked');
          Bridge.minimizeWindow();
        });
      }
    }
    
    /**
     * Initialize application settings
     */
    function initializeSettings() {
      // Load settings on startup
      Bridge.loadSettings();
      
      // Auto-save settings when changes are made
      const settingsInputs = document.querySelectorAll('select, input[type="checkbox"], input[type="radio"]');
      settingsInputs.forEach(input => {
        input.addEventListener('change', () => {
          // Collect all settings
          const settings = {
            // Add setting collection logic here
          };
          Bridge.saveSettings(settings);
        });
      });
    }
    
    /**
     * Main application initialization
     */
    function initializeApp() {
      console.log('=== ASR Pro Application Starting ===');
      
      // Initialize all subsystems
      initializeWindowControls();
      initializeSettings();
      
      // Initialize Lucide icons
      if (typeof lucide !== 'undefined') {
        lucide.createIcons();
        console.log('Lucide icons initialized');
      }
      
      console.log('Application initialization complete');
    }
    
    // Start the application when DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initializeApp);
    } else {
      initializeApp();
    }
  </script>
</body>
</html>